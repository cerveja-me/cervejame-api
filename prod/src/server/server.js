'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _express=require('express');var _express2=_interopRequireDefault(_express);var _bodyParser=require('body-parser');var _bodyParser2=_interopRequireDefault(_bodyParser);var _cors=require('cors');var _cors2=_interopRequireDefault(_cors);var _morgan=require('morgan');var _morgan2=_interopRequireDefault(_morgan);var _helmet=require('helmet');var _helmet2=_interopRequireDefault(_helmet);var _router=require('../router/router');var _router2=_interopRequireDefault(_router);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const NODE_ENV=process.env.NODE_ENV;const server=(0,_express2.default)();if(NODE_ENV==='development'||NODE_ENV==='test'){server.use((0,_morgan2.default)('combined'))}server.use(_bodyParser2.default.urlencoded({extended:true}));server.use(_bodyParser2.default.json());server.use((0,_cors2.default)());server.use((0,_helmet2.default)());server.use('/api/',_router2.default);server.use((err,req,res,next)=>{res.status(err.status).json(err)});exports.default=server;